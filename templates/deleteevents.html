<!DOCTYPE html>
<html>
<head>
<title>Удаление мероприятия</title>
<style>
body {
  font-family: sans-serif;
}
form {
  width: 300px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
}
label {
  display: block;
  margin-bottom: 5px;
}
input[type="text"],
input[type="number"] {
  width: 100%;
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-sizing: border-box;
}
button {
  background-color: #4CAF50;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 3px;
  cursor: pointer;
}
button:hover {
  background-color: #45a049;
}
#message {
  margin-top: 10px;
  text-align: center;
}
#message.success {
  color: green;
}
#message.error {
  color: red;
}

</style>
</head>
<body>

<h1>Удаление мероприятия</h1>

<form id="deleteForm" method="POST" action="/deleteevent/"> <!-- действие отправки на /deleteevent/ -->
  <label for="eventId">ID мероприятия:</label>
  <input type="number" id="eventId" name="eventId" required>

  <label for="username">Имя пользователя:</label>
  <input type="text" id="username" name="username" required>

  <button type="submit">Удалить</button>
</form>

<div id="message"></div>

<script>
const deleteForm = document.getElementById('deleteForm');
const messageDiv = document.getElementById('message');

deleteForm.addEventListener('submit', async (event) => {
  event.preventDefault();
  messageDiv.textContent = '';
  messageDiv.classList.remove('success', 'error');

  const eventId = document.getElementById('eventId').value;
  const username = document.getElementById('username').value;

  try {
    const response = await fetch('/deleteevent/', { <!-- адрес отправки на /deleteevent/ -->
      method: 'POST', // Изменено на POST
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ id, username })
    });

    if (response.ok) {
      const data = await response.json();
      messageDiv.textContent = data.message;
      messageDiv.classList.add('success');
    } else {
      const errorData = await response.json();
      messageDiv.textContent = errorData.message || 'Ошибка при удалении';
      messageDiv.classList.add('error');
    }
  } catch (error) {
    messageDiv.textContent = 'Произошла ошибка';
    messageDiv.classList.add('error');
    console.error('Error:', error);
  }
});
</script>

</body>
</html>
